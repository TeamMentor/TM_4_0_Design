sudo: false
language: node_js
node_js:
- 0.1
before_install:
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - "mkdir ./.tmCache"
  - "cd ./.tmCache"
  - "git clone https://tm-build:$git_pwd@github.com/TMContent/Lib_Docs-json.git ./.tmCache/Lib_Docs-json"
  - "cd Lib_Docs-json"
  - "ls"
  - "cd .."
  - "cd .."
  - "npm install"
  - "npm test"
after_script:
- 'echo ''Since tests passed: instrument files, rerun tests and publish results to
  coveralls'' '
- sh -e ./node/bin/publish-code-coverage.sh
notifications:
  slack:
    secure: Zq3PlPkli6+YeBz84vjr0iJEaSwM7cilAYh1e2NTXUY1bL2s/1BL2RTWqDKwJw8M48JsmNdjLewX9ceQClDGojWpjmtJ0e3OrO02RPdYE/8KYzTlDdZ/NfoCNPJCR3saHnASoJLjAekNeT4HJsspQTxRk4oPNJ+gyJ4eERgwQR8=
