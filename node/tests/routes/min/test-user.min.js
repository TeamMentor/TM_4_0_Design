"use strict";var assert=require("assert"),Browser=new require("zombie"),app=require("../../server"),browser;describe("User Login sequence",function(){before(function(){app.server=app.listen(app.port),Browser.localhost("localhost",app.port)}),after(function(){app.server.close()}),beforeEach(function(e){browser=new Browser,browser.visit("/user/login/returning-user-login.html").then(e).fail(function(){assert.fail("error")})}),it("Check login page Form fields ",function(){browser.assert.text("h3","Login"),browser.assert.attribute("form","method","post"),browser.assert.attribute("form","action","/user/login"),browser.assert.element("#new-user-username"),browser.assert.element("#new-user-password"),browser.assert.element("#btn-login"),browser.assert.element("#btn-forgot-pwd"),browser.assert.text("#btn-login","Login"),browser.assert.text("#btn-forgot-pwd","Forgot your password?")}),it("Submit from with bad data",function(e){var r="tm",s="tmAAAA";browser.fill("#new-user-username",r),browser.assert.attribute("#new-user-username","value",r),browser.fill("#new-user-password",s),browser.assert.attribute("#new-user-password","value",s),browser.click("#btn-login",function(){browser.assert.url("http://localhost/user/login/returning-user-validation.html"),browser.visit("/session",function(){var r=JSON.parse(browser.text("body"),!0);assert.equal(r.username,void 0),e()})})}),it("Submit from with valid account",function(e){var r="tm",s="tm";browser.fill("#new-user-username",r),browser.assert.attribute("#new-user-username","value",r),browser.fill("#new-user-password",s),browser.assert.attribute("#new-user-password","value",s),browser.click("#btn-login",function(){browser.assert.url("http://localhost/home/main-app-view.html"),browser.visit("/session",function(){var s=JSON.parse(browser.text("body"),!0);assert.equal(s.username,r),e()})})})});