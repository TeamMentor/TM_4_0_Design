include ../_mixins/user-mixins
//- directory-list
mixin directory-list
    if(containers)
        .bg
            h3#title= title
            #containers
                table.nav
                    each container in containers
                        tr
                            td
                                a(href= href + ',' +container.id, id=container.id)= container.title
                            td
                                span.right.badge= container.size

//- search-bar-input
mixin search-bar-input
    #search-div
        .lge-container
            .row
                .col-offset-2.col-8
                    #search-input
                        form(action='/search', method='GET')
                            label(for='search-input') Search here
                            .input-group
                                input.form-control(type='text', id='search-input', name='text')
                                span.input-group-btn
                                    button#search-button(type='submit')
                                        +search-icon

mixin search-poc
    #search-div-2
        .lge-container
            #search-input
                form(action='/search', method='GET')
                    label(for='search-input') Search here
                    .input-group
                        input.form-control(type='text', name='text', value= text)
                        span.input-group-btn
                            button#search-button(type='submit')
                                +search-icon

//- results
mixin results
    #results
        table
            tr
                if no_Results
                    td
                        p.label#no_results No Results
                        p Please try again
                td
                    if results
                        if results.size() > 250
                            p.label#resultsTitle= 'Showing ' + results.take(250).size() + ' articles (of '  + results.size() + ')'
                        else
                            p.label#resultsTitle= 'Showing ' + results.size() + ' articles'
                td.text-right
                    if activeFilter
                        span#activeFilter.filter= activeFilter.title
                            span.close
                                a(href=href) x

mixin results-2
    #results-2
        +results

//- main-app-view
mixin main-app-view
    #main-app-view
        if (recentArticles && recentArticles.values().not_Empty())
            .bg
                #recently-Viewed-Articles
                    h4.label Recently Viewed Articles
                    table.nav
                        for recentArticle in recentArticles
                          tr
                            td
                                a(href=recentArticle.href, target='_blank')= recentArticle.title
        if (searchTerms)
            .bg
                #popular-Search-Terms
                    h4.label Popular Search Terms
                    table.nav
                        for searchTerm in searchTerms
                            tr
                                td
                                    a(href=searchTerm.href)= searchTerm.title
        if (topArticles)
            .bg
                #top-articles
                    h4.label Top Articles
                    table.nav
                        for article in topArticles
                            if article
                                tr
                                    td
                                        a(href=article.href, target='_blank')= article.title
                                            span.right.badge= article.weight
        //if (newArticles)
            .bg
                h4.label New Articles
                    table.nav
                        for newArticle in newArticles
                            tr
                                td
                                    a(href=newArticle.href, target='_blank')= newArticle.title

//- articles-list
mixin articles-list
    #articles
        if results
            each result in results.take(250)
                #list-view-article
                    if result
                        table
                            tr
                                td
                                    a(href='/article/' + result.id, id=result.id)
                                        h4=  result.title
                            tr
                                td
                                    p= result.summary + '...'

//- filters
mixin filters-div
    if filters
        #filters
            .bg
                h3 Filter by
                for filter in filters
                    h4.label= filter.title
                    table.nav
                        for result in filter.results
                            tr
                                if activeFilter && result.id == activeFilter.id
                                    td
                                        a(href= href )
                                            b= result.title
                                            span.right.badge= result.size
                                else
                                    td
                                        a(href=href + '/'+result.id)= result.title
                                            span.right.badge= result.size